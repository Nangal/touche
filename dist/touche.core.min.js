/*! Touché - v1.0.0 - 2013-02-03
* https://github.com/stoffeastrom/touche/
* Copyright (c) 2013 Christoffer Åström, Andrée Hansson; Licensed MIT */
(function(e){"use strict";e.augment=function(e){var t=this.prototype,n=Object.create(t),r=e.call(n,this,t);return typeof r!="function"&&(r=function(){}),n.constructor=r,r.prototype=n,r}})(Function.prototype),function(){"use strict";var e;e=window.Touche=function(t){if(typeof t=="undefined")throw new Error("No element sent into Touche()");if(!(this instanceof e))return new e(t);this.elem=t,this.gestureHandler=e.cache.get(t)},e.prototype.on=function(t,n){return e.prototype[t].call(this,n),this},e.prototype.off=function(t,n){return this.gestureHandler.gestures.filter(function(e){return t&&t!=="*"&&n?e.type===t&&e.id===n:t&&t==="*"&&n?e.id===n:t?e.type===t:!0}).forEach(function(e){e.off(this.elem),this.gestureHandler.removeGesture(e)},this),this.gestureHandler.gestures.length===0&&e.cache.data.length===1&&e.cache.remove(this.elem),this},e._gestures={},e.gestures={add:function(t,n){e._gestures[t]=n,e.prototype[t]=function(r){var i,s=new e.Binder(r);return i=new n(this.gestureHandler,t,s),this.gestureHandler.addGesture(i),i.on(this.elem),this}},get:function(t){return e._gestures[t]},remove:function(t){e._gestures[t]&&(e.cache.data.forEach(function(e){e.context.gestures.filter(function(e){return e.type===t}).forEach(function(t){e.context.removeGesture(t)})}),delete e.prototype[t],delete e._gestures[t])}}}(),function(e,t){"use strict";e.GestureHandler=Object.augment(function(){function n(e){this.element=e,this.gestures=[],this.sortedGestures=[],this.data={},this.data.points=[],this.data.pointerIds=[],this.data.pagePoints=[],this.started=!1,this.ended=!1}return this.activate=function(){this.on(this.element,e.utils.getEvents().start)},this.deactivate=function(){this.off(this.element,e.utils.getEvents().start),this.bindDoc(!1),e.cache.remove(this.element)},this.on=function(t,n){e.utils.msPointer&&(t.style&&t.style.msTouchAction?this.msTouchAction=t.style.msTouchAction:t.style||(t.style=""),t.style.msTouchAction="none"),t.addEventListener(n,this,!1)},this.off=function(t,n){t.removeEventListener(n,this,!1),e.utils.msPointer&&t.style&&(t.style.msTouchAction=this.msTouchAction)},this.reset=function(){this.gestures.forEach(function(e){e.started=!1,e.cancelled=!1,e.countTouches=0}),this.data={},this.data.pointerIds=[],this.data.points=[],this.data.pagePoints=[],this.started=!1,this.ended=!1},this.trigger=function(t,n,r){this.sortedGestures.map(function(e){return e.context}).forEach(function(i){i.paused&&e.utils.isFunction(i[t])&&!i.cancelled?i.addPausedCallback(t,n,r):e.utils.isFunction(i[t])&&!i.cancelled&&i[t].call(i,n,r)},this)},this.play=function(e){e=e||!1,this.sortedGestures.map(function(e){return e.context}).filter(function(e){return e.paused}).forEach(function(t){t.play(e)})},this.pause=function(e,t){this.sortedGestures.map(function(e){return e.context}).filter(function(n){return e?t!==n&&e===n.type:t!==n}).forEach(function(e){e.pause()})},this.addGesture=function(e){this.gestures.push(e),this.sortGestures(),this.gestures.length===1&&this.activate()},this.removeGesture=function(e){this.gestures=this.gestures.filter(function(t){return t!==e}),this.sortGestures(),this.gestures.length===0&&this.deactivate()},this.removeGestures=function(e){this.gestures.filter(function(t){return e?t.type===e:!0}).forEach(function(e){this.removeGesture(e)},this)},this.cancelGesture=function(e){e.cancelled||(e.cancel.call(e),e.cancelled=!0)},this.cancelGestures=function(e){return this.gestures.filter(function(t){return t.type!==e}).forEach(function(e){this.cancelGesture(e)},this),this},this.sortGestures=function(){this.sortedGestures=this.gestures.map(function(e){return{key:e.sortKey,context:e}}).sort(function(e,t){return e.key-t.key})},this.bindDoc=function(n){this[n?"on":"off"](t,e.utils.getEvents().move),this[n?"on":"off"](t,e.utils.getEvents().end),this[n?"on":"off"](t,e.utils.getEvents().cancel)},this.handleEvent=function(t){var n=e.utils.getEvents();switch(t.type){case n.start:this.started&&this.ended&&this.reset(),this.bindDoc(!0),this.setPoints(t),this.trigger("start",t,this.data),this.started=!0;break;case n.move:this.setPoints(t),this.trigger("update",t,this.data);break;case n.end:this.bindDoc(!1),this.trigger("end",t,this.data),this.ended=!0;break;case n.cancel:this.bindDoc(!1),this.trigger("cancel",t,this.data)}},this.setPoints=function(t,n){n=n||"touches";var r,i,s,o,u;if(e.utils.touch){s=t[n],i=s.length;for(r=0;r<i;++r)this.data.points.length=i,this.data.pagePoints.length=i,this.data.points[r]=e.utils.transformPoint(t.target,new e.Point(s[r].pageX,s[r].pageY)),this.data.pagePoints[r]=new e.Point(s[r].pageX,s[r].pageY)}else e.utils.msPointer?(o=t.pointerId,u=this.data.pointerIds.indexOf(o),u<0&&(u=this.data.pointerIds.push(o)-1),i=this.data.pointerIds.length,this.data.points.length=i,this.data.pagePoints.length=i,this.data.points[u]=e.utils.transformPoint(t.target,new e.Point(t.pageX,t.pageY)),this.data.pagePoints[u]=new e.Point(t.pageX,t.pageY)):(this.data.points.length=1,this.data.pagePoints.length=1,this.data.points[0]=e.utils.transformPoint(t.target,new e.Point(t.pageX,t.pageY)),this.data.pagePoints[0]=new e.Point(t.pageX,t.pageY))},n})}(window.Touche,window.document),function(e,t,n){"use strict";var r=9;e.utils={noop:function(){},getSortKey:function(){return 5*++r},isSVG:function(e){return e.nodeType===1&&e.namespaceURI==="http://www.w3.org/2000/svg"},closest:function(e,t){var n=function(e,t){return e.toUpperCase()===t.toUpperCase()},r=e.parentNode;if(!r)return null;if(n(e.tagName,t))return e;if(n(r.tagName,t))return r;while(r){r=r.parentNode;if(n(r.tagName,t))return r}return null},transformPoint:function(t,n){var r,i;if(e.utils.isSVG(t)){r=e.utils.closest(t,"svg");if(r)return i=r.createSVGPoint(),i.x=n.x,i.y=n.y,i=i.matrixTransform(r.getScreenCTM().inverse()),new e.Point(i.x,i.y)}return n},getRect:function(t){var n,r=window,i=r.document,s=i.body,o;return e.utils.isSVG(t)?(n=t.getBBox(),new e.Rect(n.x,n.y,n.width,n.height)):(o=r===t||i===t||!t.getBoundingClientRect?s:t,n=o.getBoundingClientRect(),new e.Rect(n.left+(r.scrollX||i.documentElement.scrollLeft),n.top+(r.scrollY||i.documentElement.scrollTop),n.width,n.height))},touch:"ontouchstart"in window,msPointer:window.navigator.msPointerEnabled,getEvent:function(e){switch(e){case"start":return this.msPointer?"MSPointerDown":this.touch?"touchstart":"mousedown";case"update":return this.msPointer?"MSPointerMove":this.touch?"touchmove":"mousemove";case"end":return this.msPointer?"MSPointerUp":this.touch?"touchend":"mouseup";case"cancel":return this.msPointer?"MSPointerCancel":this.touch?"touchcancel":"";default:throw"Not implemented!"}},getEvents:function(){return{start:this.getEvent("start"),move:this.getEvent("update"),end:this.getEvent("end"),cancel:this.getEvent("cancel")}},logger:function(e,t){if(!e.touches)return;t=e[t||"touches"];var n="",r=t.length;n+="touches: "+r,n+=t.map(function(e){return"x:"+e.pageX+", "+e.pageY}).join(" "),window.console.log(n)},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"},isArray:function(e){return Array.isArray(e)},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},getAngle:function(e,r){var i=e.x-r.x,s=e.y-r.y,o=t(s,i),u=o*180/n;return u=u<0?360+u:u,u},getDeltaAngle:function(e,r){var i=r.x-e.x,s=r.y-e.y,o=t(s,i),u=o*180/n;return u},getDirection:function(e){var t="invalid";return e>=0&&e<45||e>=315&&e<=360?t="right":e>=45&&e<135?t="down":e>=135&&e<225?t="left":e>=225&&e<315&&(t="up"),t},getVelocity:function(e,t,n,r){var i=e.distanceTo(t),s=r-n;return i/s}}}(window.Touche,Math.atan2,Math.PI),function(e){"use strict";e.cache={data:[],has:function(e){return this.data.filter(function(t){return t.elem===e})},get:function(t){var n=this.has(t);return n.length===0?this.data[this.data.push({elem:t,context:new e.GestureHandler(t)})-1].context:n[0].context},remove:function(e){var t=this.has(e),n;t.length&&(n=this.data.indexOf(t),this.data.splice(n,1))}}}(window.Touche),function(e){"use strict";e.Gesture=Object.augment(function(){function t(t,n,r){this.gestureHandler=t,this.type=n,this.binder=r,this.started=!1,this.cancelled=!1,this.pausedCallbacks=[],this.paused=!1,this.countTouches=0,this.options={},this.setOptions(),this.sortKey=this.options.precedence||e.utils.getSortKey(),this.id=this.binder.id}return this.on=e.utils.noop,this.off=e.utils.noop,this.start=e.utils.noop,this.update=e.utils.noop,this.end=e.utils.noop,this.cancel=function(){this.cancelled=!0},this.pause=function(){this.paused=!0},this.addPausedCallback=function(e,t,n){this.pausedCallbacks.push({action:e,event:t,data:n})},this.play=function(e){e&&!this.cancelled?this.pausedCallbacks.forEach(function(e){this[e.action].call(this,e.event,e.data)},this):this.gestureHandler.cancelGesture(this),this.paused=!1,this.pausedCallbacks=[]},this.setOptions=function(){Object.keys(this.defaults).forEach(function(e){this.options[e]=this.binder.options&&typeof this.binder.options[e]!="undefined"?this.binder.options[e]:this.defaults[e]},this)},this.hasMoreTouches=function(e){return this.countTouches=e.length>this.countTouches?e.length:this.countTouches,this.countTouches>0&&this.countTouches>this.options.touches},this.hasNotEqualTouches=function(e){return this.hasMoreTouches(e),this.countTouches>0&&this.countTouches!==this.options.touches},this.isValidMouseButton=function(t,n){if(e.utils.touch)return!0;if(e.utils.msPointer)return!0;var r=t.button,i=t.which,s;return s=!i&&r!==undefined?r&1?1:r&2?3:r&4?2:0:i,s===n},t})}(window.Touche),function(e){"use strict";e.Binder=Object.augment(function(){function t(e){this.bind(e)}return this.start=e.utils.noop,this.update=e.utils.noop,this.end=e.utils.noop,this.cancel=e.utils.noop,this.bind=function(e){Object.keys(e||{}).forEach(function(t){this[t]=e[t]},this)},t})}(window.Touche),function(e,t,n,r){"use strict";e.Point=function(e,t){this.x=e,this.y=t},e.Point.prototype.distanceTo=function(e){var i=t(this.x-e.x),s=t(this.y-e.y),o=n(r(i,2)+r(s,2));return o}}(window.Touche,Math.abs,Math.sqrt,Math.pow),function(e){"use strict";e.Rect=function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r},e.Rect.prototype.pointInside=function(e,t){t=t||0;var n=this.x-t,r=this.y-t,i=this.x+this.width+t,s=this.y+this.height+t;return e.x>=n&&e.x<=i&&e.y>=r&&e.y<=s}}(window.Touche);