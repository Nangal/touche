/*! Touché - v1.0.3 - 2013-03-14
* https://github.com/stoffeastrom/touche/
* Copyright (c) 2013 Christoffer Åström, Andrée Hansson; Licensed MIT */
(function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:400,touches:1,precedence:4,preventDefault:!0},this.on=function(e){this.count=0,t(e).on("tap",{id:this.id,end:this.end})},this.off=function(e){t(e).off("tap",this.id)},this.end=function(t,e){var i=this;++this.count,1===this.count?(this.startTime=+new Date,this.gestureHandler.pause(null,this),this.timerId=setTimeout(function(){i.gestureHandler.play(!0),i.count=0},this.options.timeThreshold+5)):2===this.count&&(window.clearTimeout(this.timerId),this.endTime=+new Date,this.startTime+this.options.timeThreshold>=this.endTime&&(this.gestureHandler.play(),this.binder.end.call(this,t,e)),this.count=0),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled=!0,window.clearTimeout(this.timerId)},i});t.gestures.add("doubletap",e)})(window.Touche),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:800,precedence:5,preventDefault:!0,touches:1,interval:25,which:1},this.preventDefaultForMSPointer=function(e){if(t.utils.msPointer){var i=window.document,s=["MSGestureHold","contextmenu"],n=function(t){t.preventDefault()};e=e||!0,s.forEach(function(t){i[e?"addEventListener":"removeEventListener"](t,n,!1)})}},this.pause=function(){this.paused=!0,window.clearTimeout(this.timerId)},this.start=function(e,i){if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.points))return this.cancel(),void 0;this.rect=t.utils.getRect(e.target),this.count=0,this.intervalSteps=this.options.timeThreshold/this.options.interval,this.startTime=+new Date;var s=this;window.clearTimeout(s.timerId),s.timerId=window.setInterval(function(){++s.count,i.percentage=100*(s.count/s.intervalSteps),1===s.count?(s.binder.start.call(s.binder,e,i),s.startFired=!0):s.binder.update.call(s.binder,e,i),s.count>=s.intervalSteps&&window.clearTimeout(s.timerId)},this.options.interval),this.options.preventDefault&&(e.preventDefault(),this.preventDefaultForMSPointer())},this.update=function(t,e){(this.hasMoreTouches(e.points)||!this.rect.pointInside(e.points[0],this.options.areaThreshold))&&this.cancel(),this.options.preventDefault&&t.preventDefault()},this.end=function(t,e){return window.clearTimeout(this.timerId),this.hasNotEqualTouches(e.points)?(this.cancel(),void 0):(this.rect.pointInside(e.points[0],this.options.areaThreshold)&&this.startTime+this.options.timeThreshold<=+new Date?(this.gestureHandler.cancelGestures(this.type),this.binder.end.call(this,t,e)):this.cancel(),this.options.preventDefault&&(t.preventDefault(),this.preventDefaultForMSPointer(!1)),void 0)},this.cancel=function(){this.cancelled||(this.cancelled=!0,window.clearTimeout(this.timerId),this.startFired&&this.count>0&&(this.binder.cancel.call(this.binder),this.startFired=!1),this.preventDefaultForMSPointer(!1))},i});t.gestures.add("longtap",e)}(window.Touche),function(t,e){"use strict";var i=t.Gesture.augment(function(i){function s(){i.apply(this,arguments)}return this.defaults={pinchThreshold:8,preventDefault:!0},this.start=function(e,i){return this.rect=t.utils.getRect(e.target),this.pinch={start:{},current:{}},this.hasMoreTouches(i.points)?(this.cancel(),void 0):(this.pinch.start.point1=i.points[0],this.pinch.start.point2=i.points[1],this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(t,i){return this.hasMoreTouches(i.points)?(this.cancel(),void 0):(this.countTouches===this.options.touches&&(this.pinch.start.point2?(this.pinch.current.point1=i.points[0],this.pinch.current.point2=i.points[1],this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1),this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1),this.pinch=e(this.startDistance-this.currentDistance),this.scale=this.currentDistance/this.startDistance,i.scale=this.scale,!this.started&&this.pinch>=this.options.pinchThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,t,i)):this.started&&this.binder.update.call(this,t,i)):this.pinch.start.point2=i.points[1]),this.options.preventDefault&&t.preventDefault(),void 0)},this.end=function(t,e){this.started&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this.bindingObj))},s});t.gestures.add("pinch",i)}(window.Touche,Math.abs),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={rotationThreshold:12,preventDefault:!0},this.start=function(e,i){return this.rect=t.utils.getRect(e.target),this.rotate={start:{},current:{}},this.hasMoreTouches(i.points)?(this.cancel(),void 0):(this.rotate.start.point1=i.points[0],this.rotate.start.point2=i.points[1],this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(e,i){return this.hasMoreTouches(i.points)?(this.cancel(),void 0):(this.countTouches===this.options.touches&&(this.rotate.start.point2?(this.rotate.current.point1=i.points[0],this.rotate.current.point2=i.points[1],this.startAngle=t.utils.getDeltaAngle(this.rotate.start.point2,this.rotate.start.point1),this.currentAngle=t.utils.getDeltaAngle(this.rotate.current.point2,this.rotate.current.point1),this.rotation=this.currentAngle-this.startAngle,i.rotation=this.rotation,!this.started&&this.rotation>=this.options.rotationThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,e,i)):this.started&&this.binder.update.call(this,e,i)):this.rotate.start.point2=i.points[1]),this.options.preventDefault&&e.preventDefault(),void 0)},this.end=function(t,e){this.started&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.bindingObj.cancel.call(this.bindingObj))},i});t.gestures.add("rotate",e)}(window.Touche),function(t,e){"use strict";var i=t.Gesture.augment(function(i){function s(){i.apply(this,arguments)}return this.defaults={radiusThreshold:12,preventDefault:!0,touches:1,which:1},this.setSwipe=function(i){this.swipe.currentPoint=i,this.swipe.currentTime=+new Date,this.swipe.deltaX=this.swipe.currentPoint.x-this.swipe.startPoint.x,this.swipe.deltaY=this.swipe.currentPoint.y-this.swipe.startPoint.y,this.swipe.velocity=t.utils.getVelocity(this.swipe.startPoint,this.swipe.currentPoint,this.swipe.startTime,this.swipe.currentTime),this.swipe.angle=t.utils.getAngle(this.swipe.startPoint,this.swipe.currentPoint),this.swipe.direction=t.utils.getDirection(this.swipe.angle),this.swipe.elementDistance="left"===this.swipe.direction||"right"===this.swipe.direction?this.rect.width:this.rect.height,this.swipe.distance="left"===this.swipe.direction||"right"===this.swipe.direction?e(this.swipe.deltaX):e(this.swipe.deltaY),this.swipe.percentage=100*(this.swipe.distance/this.swipe.elementDistance)},this.start=function(e,i){return this.rect=t.utils.getRect(e.target),this.swipe={},this.countTouches=0,!this.isValidMouseButton(e,this.options.which)||this.hasNotEqualTouches(i.points)?(this.cancel(),void 0):(this.swipe.startPoint=i.points[0],this.swipe.startTime=+new Date,this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(t,e){return this.hasNotEqualTouches(e.points)?(this.cancel(),void 0):(this.setSwipe(e.points[0]),e.swipe=this.swipe,!this.started&&this.swipe.startPoint.distanceTo(this.swipe.currentPoint)>=this.options.radiusThreshold?(this.gestureHandler.cancelGestures(this.type),this.started=!0,this.binder.start.call(this,t,e)):this.started&&this.binder.update.call(this,t,e),this.swipe.startTime=this.swipe.currentTime,this.options.preventDefault&&t.preventDefault(),void 0)},this.end=function(t,e){this.started&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this.bindingObj))},s});t.gestures.add("swipe",i)}(window.Touche,Math.abs),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,precedence:6,preventDefault:!0,touches:1,which:1},this.start=function(e,i){return this.started=!0,this.rect=t.utils.getRect(e.target),!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.points)?(this.cancel(),void 0):(this.binder.start.call(this,e,i),this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(t,e){return this.hasMoreTouches(e.points)||!this.rect.pointInside(e.points[0],this.options.areaThreshold)?(this.cancel(),void 0):(this.options.preventDefault&&t.preventDefault(),void 0)},this.end=function(t,e){this.hasNotEqualTouches(e.points)||(this.rect.pointInside(e.points[0],this.options.areaThreshold)&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault())},this.cancel=function(t,e){this.cancelled=!0,this.binder.cancel.call(this,t,e)},i});t.gestures.add("tap",e)}(window.Touche);